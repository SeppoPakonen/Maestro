I'll help you implement the missing work command handlers for the Maestro project. Let me start by reading the task specification and understanding the existing code.

Let me start by reading the task specification:

Now let me examine the existing work.py file:

Let me continue reading the rest of the work.py file:

Now, let me check the main.py file to understand how commands are called:

Let me also look for the argument parser definitions to understand the command structure:

Let me check the work session module to understand how sessions work:

Now, let me also check the breadcrumb module to understand how breadcrumbs work:

Now I'll mark the first few tasks as completed and start working on the implementation:

Now I'll implement the missing functions. First, I'll create the handle_work_analyze function:

Now I need to make sure that the necessary modules are imported. Let me check the imports at the top of the file and add any that might be missing:

Good, the necessary imports are already there. Now let me mark the implementation tasks as completed and create the output files:

Now let me create the directory for the output files and then create both the implementation patch and summary:

First, I'll create the implementation patch file by comparing the original with the new version:

Now let me create the summary.md file:

Let me mark the final task as completed:

Let me verify that the output files were created successfully:

Let me also check the content of the patch file to make sure it contains our implementation:

Perfect! I have successfully implemented the missing work command handlers. Here's a summary of what was accomplished:

1. **Implemented `handle_work_analyze` function**:
   - Creates an analysis session with the 'analyze' session type
   - Handles both specific targets (files, directories, tracks, phases, issues) and general repository analysis
   - Uses AI to provide insights and recommendations
   - Creates breadcrumbs for tracking AI interactions
   - Implements proper error handling

2. **Implemented `handle_work_fix` function**:
   - Implements a 4-phase workflow (analyze → decide → fix → verify) when the --issue flag is provided
   - Each phase creates its own sub-session linked to the parent session
   - Handles direct target fixing without an issue reference
   - Creates appropriate AI prompts based on the target type
   - Implements proper error handling and session management

3. **Created output files**:
   - `qwen_tasks/ws3_output/implementation.patch`: Contains the unified diff of changes
   - `qwen_tasks/ws3_output/summary.md`: Contains a detailed summary of the implementation

The implementation follows the existing patterns and code style in the Maestro project, integrates properly with the existing session and breadcrumb systems, and handles errors gracefully.
</body>
</html>
