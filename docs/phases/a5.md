# Phase A5: Portage Superset Integration ðŸ’¡ **[Proposed]**

**Duration**: 4-6 weeks
**Dependencies**: Phases A2-A4

**Objective**: Create the glue code for the common superset of umk and Portage.

## Concept

This phase creates the "integration glue" that handles:
1. Packages that can be built with either umk or Portage
2. Packages that use umk but depend on Portage packages
3. Packages that use Portage but depend on umk packages
4. Mixed USE flag environments

## Key Design Principle

The superset must be flexible from the start. It needs to:
- Handle umk's multi-configuration builds
- Handle Portage's single-configuration builds
- Support shared libraries better than umk does natively
- Support static linking better than Portage does natively
- Recognize host system packages with their USE flags
- Allow building from source when host packages don't satisfy

## Tasks

- [ ] **A5.1: Unified Package Model**
  - [ ] Create `UnifiedPackage` that represents both umk and ebuild packages
  - [ ] Common metadata format
  - [ ] Common dependency format
  - [ ] Common USE flag format

- [ ] **A5.2: Cross-Build-System Dependencies**
  - [ ] umk package depending on Portage package
  - [ ] Portage package depending on umk package
  - [ ] Mixed dependency chains

- [ ] **A5.3: USE Flag Unification**
  - [ ] Map umk flags to Portage USE flags
  - [ ] Map Portage USE flags to umk flags
  - [ ] Handle flag conflicts

- [ ] **A5.4: Library Linking Integration**
  - [ ] Link umk packages against Portage-installed shared libraries
  - [ ] Link Portage packages against umk-built static libraries
  - [ ] Handle SONAME and library versioning

- [ ] **A5.5: Multi-Configuration Support**
  - [ ] Extend Portage to support multiple configurations (if needed)
  - [ ] Build umk packages with multiple USE flag combinations
  - [ ] Installation and package management for multi-config builds

## Deliverables:
- Unified package model
- Cross-build-system dependency support
- USE flag unification
- Multi-configuration support

## Test Criteria:
- Can build mixed projects (umk + Portage)
- Dependencies resolve correctly
- USE flags work across systems
- Multi-configuration builds work