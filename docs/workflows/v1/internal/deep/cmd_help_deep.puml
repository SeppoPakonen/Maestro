@startuml cmd_help_deep
!include _shared.puml

' MODULE: MaestroMain, "maestro/main.py"
rectangle "main()" as MainEntry <<Function>>

' MODULE: CLIParser, "maestro/modules/cli_parser.py"
rectangle "create_main_parser()" as CreateParser <<Function>>
rectangle "StyledArgumentParser.print_help()" as StyledArgParser_print_help <<Function>>
rectangle "StyledArgumentParser.format_help()" as StyledArgParser_format_help <<Function>>
rectangle "_filter_suppressed_help()" as FilterSuppressedHelp <<Function>>

' MODULE: Utils, "maestro/modules/utils.py"
rectangle "styled_print()" as StyledPrint <<Function>>
rectangle "print_subheader()" as PrintSubheader <<Function>>
rectangle "Colors" as ColorsConst <<Class>>

' MODULE: Pyfiglet, "pyfiglet (optional)"
rectangle "figlet_format()" as FigletFormat <<Function>>

' MODULE: Argparse, "argparse Library"
rectangle "ArgumentParser.parse_args()" as ArgParser_parse_args <<Function>>
rectangle "ArgumentParser.format_help()" as ArgParser_format_help <<Function>>

MainEntry --> CreateParser : "1. Initialize parser"
CreateParser --> ArgParser_parse_args : "2. Returns parser, parse args"
MainEntry --> ArgParser_parse_args : "3. Parse CLI arguments"

MainEntry -[#Blue]-> StyledArgParser_print_help : "4. If args.command == 'help', print help"

StyledArgParser_print_help --> StyledArgParser_format_help : "5. Format help text"
StyledArgParser_format_help --> ArgParser_format_help : "5.1. Get raw help from argparse"
StyledArgParser_format_help --> FilterSuppressedHelp : "5.2. Filter suppressed text"

StyledArgParser_print_help --> StyledPrint : "6. Print banner (MAESTRO ASCII art)"
StyledArgParser_print_help --> PrintSubheader : "7. Print 'COMMAND OPTIONS' subheader"
StyledArgParser_print_help --> StyledPrint : "8. Print styled help lines"
StyledArgParser_print_help --> StyledPrint : "9. Print version footer"

StyledArgParser_print_help -[#DarkGreen,dotted]-> FigletFormat : "Conditional: Generate ASCII art banner"

StyledPrint <- ColorsConst : "Uses Color constants"
PrintSubheader <- ColorsConst : "Uses Color constants"

@enduml
