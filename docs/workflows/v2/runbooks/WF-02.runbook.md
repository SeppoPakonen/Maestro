# WF-02: Greenfield New Project with Manual Plan

## Short Intent
This workflow covers creating a new project from scratch with a manually authored plan, emphasizing human-authored planning with optional AI assistance.

## Preconditions
- A new, empty directory or a directory with initial project files
- User has permissions to create and modify files in the directory
- User intends to create a new project with a manually planned approach

## Steps Table

| Step | Command | Why | Gates |
|------|---------|-----|-------|
| 1 | `maestro init` | Initialize the maestro environment in the current directory | REPOCONF_GATE |
| 2 | `maestro track add --name "initial-development" --description "Initial development track for new project"` | Create a new track to organize related work | REPOCONF_GATE |
| 3 | `maestro phase add --track "initial-development" --name "setup" --description "Project setup phase"` | Create a phase within the track | REPOCONF_GATE |
| 4 | `maestro task add --phase "setup" --title "Create project structure" --description "Set up basic directory structure and initial files"` | Add a task to the phase | REPOCONF_GATE |
| 5 | `maestro task add --phase "setup" --title "Configure build system" --description "Set up build configuration files"` | Add another task to the phase | REPOCONF_GATE |
| 6 | `maestro work task --id "TASK-001"` | Begin working on a specific task | WSESSION_COOKIE_GATE |
| 7 | `maestro repo resolve --level lite` | Discover and set up build system for the new project | REPO_RESOLVE_LITE |
| 8 | `maestro build` | Build the project based on the configured build system | READONLY_GUARD |

## Expected Internal Flow (Coarse)

- Maestro initialization sets up internal tracking structures
- Track creation establishes a container for related work
- Phase creation organizes work within the track
- Task creation breaks down work into manageable units
- Task execution potentially starts AI-assisted work sessions
- Repository resolver detects and configures build system
- Build system integration compiles the project

## Data Touches

### Stores Read
- `REPO_TRUTH_DOCS_MAESTRO` - To check existing project structure
- `HOME_HUB_REPO` - For user-specific settings (if needed)

### Stores Write
- `REPO_TRUTH_DOCS_MAESTRO` - To store track, phase, and task definitions; build configuration; and work session data
- `IPC_MAILBOX` - For communication with external processes (build)

## Open Questions / Unknowns

- What is the exact command for working on a specific task? Is it `maestro work task --id`?
- Are the track, phase, and task creation commands accurate as written?
- Is the build command `maestro build` or something else?

## Trace Block

```yaml
trace:
  - user: "maestro init"
    gates: ["REPOCONF_GATE"]
    stores_write: ["REPO_TRUTH_DOCS_MAESTRO"]
    internal: ["UNKNOWN"]
  - user: "maestro track add --name \"initial-development\" --description \"Initial development track for new project\""
    gates: ["REPOCONF_GATE"]
    stores_write: ["REPO_TRUTH_DOCS_MAESTRO"]
    internal: ["UNKNOWN"]
  - user: "maestro phase add --track \"initial-development\" --name \"setup\" --description \"Project setup phase\""
    gates: ["REPOCONF_GATE"]
    stores_write: ["REPO_TRUTH_DOCS_MAESTRO"]
    internal: ["UNKNOWN"]
  - user: "maestro task add --phase \"setup\" --title \"Create project structure\" --description \"Set up basic directory structure and initial files\""
    gates: ["REPOCONF_GATE"]
    stores_write: ["REPO_TRUTH_DOCS_MAESTRO"]
    internal: ["UNKNOWN"]
  - user: "maestro task add --phase \"setup\" --title \"Configure build system\" --description \"Set up build configuration files\""
    gates: ["REPOCONF_GATE"]
    stores_write: ["REPO_TRUTH_DOCS_MAESTRO"]
    internal: ["UNKNOWN"]
  - user: "maestro work task --id \"TASK-001\""
    gates: ["WSESSION_COOKIE_GATE"]
    stores_write: ["REPO_TRUTH_DOCS_MAESTRO"]
    internal: ["UNKNOWN"]
  - user: "maestro repo resolve --level lite"
    gates: ["REPO_RESOLVE_LITE"]
    stores_write: ["REPO_TRUTH_DOCS_MAESTRO"]
    internal: ["UNKNOWN"]
  - user: "maestro build"
    gates: ["READONLY_GUARD"]
    stores_write: ["REPO_TRUTH_DOCS_MAESTRO"]
    internal: ["UNKNOWN"]
```