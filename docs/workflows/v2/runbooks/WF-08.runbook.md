# WF-08: Convert Cross-Repo Pipeline

## Short Intent
This workflow covers creating and executing cross-repository conversion pipelines, such as converting code from one language to another and exporting results to a different repository.

## Preconditions
- Source repository with code to be converted
- Target repository (or location) for converted code
- Conversion tools and rules are available

## Steps Table

| Step | Command | Why | Gates |
|------|---------|-----|-------|
| 1 | `maestro convert new --name "cpp-to-rust-conversion" --description "Convert C++ codebase to Rust"` | Create a new conversion project with specified name and description | REPOCONF_GATE |
| 2 | `maestro convert plan --from "C++" --to "Rust" --source "src/cpp" --target "src/rust"` | Create a plan for converting code from C++ to Rust | REPOCONF_GATE |
| 3 | `maestro convert plan --show --name "cpp-to-rust-conversion"` | Show the details of the conversion plan | REPOCONF_GATE |
| 4 | `maestro convert run --pipeline "cpp-to-rust-conversion"` | Execute the conversion pipeline | READONLY_GUARD |
| 5 | `maestro init --repo "path/to/target/repo"` | Initialize maestro in the target repository for adoption | REPOCONF_GATE |
| 6 | `maestro convert export --pipeline "cpp-to-rust-conversion" --destination "path/to/target/repo"` | Export conversion results to another repository | READONLY_GUARD |

## Expected Internal Flow (Coarse)

- Conversion project initialization sets up tracking for the conversion
- Conversion planning creates a detailed plan for the transformation
- Plan review allows validation before execution
- Pipeline execution performs the actual conversion
- Repository adoption prepares the target location
- Export process moves results to the destination repository

## Data Touches

### Stores Read
- `REPO_TRUTH_DOCS_MAESTRO` - To read source code and conversion configurations
- `HOME_HUB_REPO` - For user-specific settings and conversion preferences

### Stores Write
- `REPO_TRUTH_DOCS_MAESTRO` - To store conversion plans, results, and pipeline state
- `IPC_MAILBOX` - For communication with external conversion tools

## Open Questions / Unknowns

- What is the exact command for creating new conversion projects? Is it `maestro convert new`?
- What is the exact command for creating conversion plans? Is it `maestro convert plan`?
- What is the correct command for showing conversion plans? Is it `maestro convert plan --show`?
- How is the second repository specified for cross-repo operations?
- What is the exact command for exporting conversion results? Is it `maestro convert export`?

## Trace Block

```yaml
trace:
  - user: "maestro convert new --name \"cpp-to-rust-conversion\" --description \"Convert C++ codebase to Rust\""
    gates: ["REPOCONF_GATE"]
    stores_write: ["REPO_TRUTH_DOCS_MAESTRO"]
    internal: ["UNKNOWN"]
  - user: "maestro convert plan --from \"C++\" --to \"Rust\" --source \"src/cpp\" --target \"src/rust\""
    gates: ["REPOCONF_GATE"]
    stores_write: ["REPO_TRUTH_DOCS_MAESTRO"]
    internal: ["UNKNOWN"]
  - user: "maestro convert plan --show --name \"cpp-to-rust-conversion\""
    gates: ["REPOCONF_GATE"]
    stores_read: ["REPO_TRUTH_DOCS_MAESTRO"]
    internal: ["UNKNOWN"]
  - user: "maestro convert run --pipeline \"cpp-to-rust-conversion\""
    gates: ["READONLY_GUARD"]
    stores_write: ["REPO_TRUTH_DOCS_MAESTRO"]
    internal: ["UNKNOWN"]
  - user: "maestro init --repo \"path/to/target/repo\""
    gates: ["REPOCONF_GATE"]
    stores_write: ["REPO_TRUTH_DOCS_MAESTRO"]
    internal: ["UNKNOWN"]
  - user: "maestro convert export --pipeline \"cpp-to-rust-conversion\" --destination \"path/to/target/repo\""
    gates: ["READONLY_GUARD"]
    stores_write: ["REPO_TRUTH_DOCS_MAESTRO"]
    internal: ["UNKNOWN"]
```