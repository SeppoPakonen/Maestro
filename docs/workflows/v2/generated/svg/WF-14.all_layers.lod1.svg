<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="DESCRIPTION" height="393px" preserveAspectRatio="none" style="width:1989px;height:393px;background:#FFFFFF;" version="1.1" viewBox="0 0 1989 393" width="1989px" zoomAndPan="magnify"><title>WF-14 - Branch safety guardrails &#8212; branch-bound state, no branch switching during work (LOD1: Workflow)</title><defs/><g><g class="title" data-source-line="31"><text fill="#000000" font-family="Arial" font-size="22" font-weight="bold" lengthAdjust="spacing" textLength="1133.0859" x="423.552" y="35.6357">WF-14 - Branch safety guardrails &#8212; branch-bound state, no branch switching during work (LOD1: Workflow)</text></g><!--cluster Command Integration--><g class="cluster" data-entity="Command Integration" data-source-line="60" data-uid="ent0011" id="cluster_Command Integration"><path d="M1824.69,188.1279 L1970.3589,188.1279 A3.75,3.75 0 0 1 1972.8589,190.6279 L1979.8589,210.2265 L1979.69,210.2265 A2.5,2.5 0 0 1 1982.19,212.7265 L1982.19,298.8179 A2.5,2.5 0 0 1 1979.69,301.3179 L1824.69,301.3179 A2.5,2.5 0 0 1 1822.19,298.8179 L1822.19,190.6279 A2.5,2.5 0 0 1 1824.69,188.1279" fill="#E6F3FF" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="1822.19" x2="1979.8589" y1="210.2265" y2="210.2265"/><text fill="#000000" font-family="Arial" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="144.6689" x="1826.19" y="203.2597">Command Integration</text></g><!--entity cmd_work--><g class="entity" data-entity="cmd_work" data-source-line="61" data-uid="ent0012" id="entity_cmd_work"><a href="../generated/svg/CMD-work.all_layers.lod1.svg" target="_top" title="../generated/svg/CMD-work.all_layers.lod1.svg" xlink:actuate="onRequest" xlink:href="../generated/svg/CMD-work.all_layers.lod1.svg" xlink:show="new" xlink:title="../generated/svg/CMD-work.all_layers.lod1.svg" xlink:type="simple"><rect fill="#FFFFFF" height="62.1973" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="101.4688" x="1839.46" y="223.1279"/><rect fill="#FFFFFF" height="10" style="stroke:#000000;stroke-width:1;" width="15" x="1920.9288" y="228.1279"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1;" width="4" x="1918.9288" y="230.1279"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1;" width="4" x="1918.9288" y="234.1279"/><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacing" textLength="29.5586" x="1854.46" y="256.2597">work</text><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacing" textLength="61.4688" x="1854.46" y="272.3583">command</text></a></g><!--entity NOTE_ANCHOR--><g class="entity" data-entity="N1" data-source-line="17" data-uid="ent0006" id="entity_N1"><path d="M1173.94,211.8479 L1173.94,296.5915 L1364.438,296.5915 L1364.438,221.8479 L1354.438,211.8479 L1173.94,211.8479" fill="#FFFFCC" style="stroke:#CCCCCC;stroke-width:1;"/><path d="M1354.438,211.8479 L1354.438,221.8479 L1364.438,221.8479 L1354.438,211.8479" fill="#FFFFCC" style="stroke:#CCCCCC;stroke-width:1;"/><text fill="#000000" font-family="Arial" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="142.2891" x="1179.94" y="229.0417">Combined view (LOD1)</text><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="1179.94" y="243.9904">&#160;</text><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacing" textLength="137.998" x="1179.94" y="258.9392">This diagram combines:</text><ellipse cx="1185.44" cy="269.1428" fill="#000000" rx="2.5" ry="2.5"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacing" textLength="157.498" x="1191.94" y="273.8879">Intent layer (workflow logic)</text><ellipse cx="1185.44" cy="284.0915" fill="#000000" rx="2.5" ry="2.5"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacing" textLength="124.2871" x="1191.94" y="288.8366">Command integration</text></g><g class="entity" data-entity="ACTIVITY_FLOW" data-source-line="38" data-uid="ent0010" id="entity_ACTIVITY_FLOW"><path d="M1399.86,122.1579 L1399.86,386.2863 L1804.525,386.2863 L1804.525,132.1579 L1794.525,122.1579 L1399.86,122.1579" fill="#FFFFCC" style="stroke:#CCCCCC;stroke-width:1;"/><path d="M1794.525,122.1579 L1794.525,132.1579 L1804.525,132.1579 L1794.525,122.1579" fill="#FFFFCC" style="stroke:#CCCCCC;stroke-width:1;"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacing" textLength="200.3066" x="1405.86" y="139.3517">(*) --&gt; "User initiates work session"</text><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacing" textLength="172.6753" x="1405.86" y="154.3004">:Check if inside Git repository;</text><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacing" textLength="24.5718" x="1405.86" y="169.2492">stop</text><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacing" textLength="339.5933" x="1405.86" y="184.1979">:Read HEAD commit hash and branch name from Git repo;</text><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacing" textLength="338.9077" x="1405.86" y="199.1466">:Store (hash, branch) as identity snapshot in SessionStore;</text><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacing" textLength="382.9287" x="1405.86" y="214.0954">:Update Docs Truth Store (./docs/maestro) with work session data;</text><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacing" textLength="128.5972" x="1405.86" y="229.0441">:Work session started;</text><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacing" textLength="314.3105" x="1405.86" y="243.9928">:Operator switches branch (git checkout other-branch);</text><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacing" textLength="341.7007" x="1405.86" y="258.9415">:User resumes work session (maestro work --resume &lt;id&gt;);</text><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacing" textLength="267.3506" x="1405.86" y="273.8903">:Retrieve identity snapshot from SessionStore;</text><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacing" textLength="383.665" x="1405.86" y="288.839">:Read current HEAD commit hash and branch name from Git repo;</text><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacing" textLength="165.4453" x="1405.86" y="303.7877">:Check for branch mismatch;</text><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacing" textLength="24.5718" x="1405.86" y="318.7365">stop</text><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacing" textLength="138.0107" x="1405.86" y="333.6852">:Continue work session;</text><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacing" textLength="261.7202" x="1405.86" y="348.6339">"Work session completed successfully" --&gt; (*)</text><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacing" textLength="306.5474" x="1405.86" y="363.5827">"Work session ended due to branch mismatch" --&gt; (*)</text><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="1405.86" y="378.5314">&#160;</text></g><!--link NOTE_ANCHOR to GMN3--><!--SRC=[rLNHRjis57ttLzow3xEDIeBNOW_UKC1rujL05WE9ks382e4XhoGY4YcGb0rZAD2Fw1VsItP9oQgTf4Mtfqq849Wyz_BSSoyFdxa2AuIwP58DxBrKDJEiWZl6xtEZ6oKMkjG6dY_3TuGGcB6cT4kjt2MZ37CZMNcqFpT6xxhWb-4xshpK3jze8z1qY4Nu7YAU8a6eWPEkHBXPHjDN4C52LtTIeO0BjaTZONInFfkE1uF68cSMOSWKBxGP0hDmkTwSf_FBnTlrrQ2G0ayM59q9HkQ50vsTx01C9jUwCHndamdStWhDRRBJvZuhzSucsnyJQP9TbWHAiLGEbOlth2hXkv7ltmzG2V0S1YqJJtSQZkuht4hSTVLD9hH5Vvj2MX2IvLurtWBjp8V1AcI7qii2emC9A7Kk-JWWA775w5JFWn8ugTKHYsV__zbuOtppmR8CtHxoXXbXc2mjVFxu2Ux2PdJdiu1rpE4BghnR1hkJZXTIvI0Qu_zv0LlnPt3JYJaU_0UdPhxOh7vVRVv8bnVh6s8ncemXYbx3y9sbGP1AEacrshOWYzPIsuU4coqAvFSWCy9OVpb-bGuCrjfAfyt-Pu9OfskFl48cuEtv_CoFN4MmWja2_2XrwYdVzypega_YmsVNb0XXvD4lEkZOKwRJ57Lk3rQnsXRQ4GMuRgc5c13zhXP47Cv87TYOnXNGvOkJe5Z5q3gZnq2jAqxA0mfa8SVDyIertJWKOMDT8zq06gMsyQHFLyeefmgubqOtr6Ew52RggBUilAe6RLCzq1H67Q5sDOfQ4FmYnUisz0gTaRZ59-eFsZrI8EZE6sFynVuN-hSTpgZA3bT9Mp4gzxYv2xgtKZLuKem734_4evFh4aa-i0tdj9WrPRaVXb6ZaNk4fq4bhA2yJZyy_ZZgXrRib6HFFN6W7Hhj_dUAP1zcvcq0M5_ULm8D2HOM3WhFO6KVXhLaqWEPDAJnqGNvHUfbwVTc1qivB93PEUIamhSpyKxJr6lQ9-dR7j1elQNtzxacYsCvlLy7brvzSUaXF3__QVbokOI_ACPtGYi_4aEV_a_5suZmvF5AX4F9WE8uoL7vCKUHs6sUB7uxY_nUpCeo3U-4ZKijfZ5jahLyw3obnEn9SplV-WA2lONdvFPsEqqiHyMCrEdqLTh9qTfl-iL-uqh0cZnJAbR2TjfRxYERfcjDDqQvK3Gn-cUdr0rvwVUTqpwW9tRwDm00]--></g></svg>