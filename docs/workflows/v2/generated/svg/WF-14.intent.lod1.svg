<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="DESCRIPTION" height="328px" preserveAspectRatio="none" style="width:1413px;height:328px;background:#FFFFFF;" version="1.1" viewBox="0 0 1413 328" width="1413px" zoomAndPan="magnify"><title>WF-14 - Branch safety guardrails &#8212; branch-bound state, no branch switching during work (LOD1: Workflow)</title><defs/><g><g class="title" data-source-line="8"><text fill="#000000" font-family="Arial" font-size="22" font-weight="bold" lengthAdjust="spacing" textLength="1133.0859" x="135.552" y="35.6357">WF-14 - Branch safety guardrails &#8212; branch-bound state, no branch switching during work (LOD1: Workflow)</text></g><!--cluster Command Integration--><g class="cluster" data-entity="Command Integration" data-source-line="39" data-uid="ent0007" id="cluster_Command Integration"><path d="M1248.69,123.2679 L1394.3589,123.2679 A3.75,3.75 0 0 1 1396.8589,125.7679 L1403.8589,145.3665 L1403.69,145.3665 A2.5,2.5 0 0 1 1406.19,147.8665 L1406.19,233.9579 A2.5,2.5 0 0 1 1403.69,236.4579 L1248.69,236.4579 A2.5,2.5 0 0 1 1246.19,233.9579 L1246.19,125.7679 A2.5,2.5 0 0 1 1248.69,123.2679" fill="#E6F3FF" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="1246.19" x2="1403.8589" y1="145.3665" y2="145.3665"/><text fill="#000000" font-family="Arial" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="144.6689" x="1250.19" y="138.3997">Command Integration</text></g><!--entity cmd_work--><g class="entity" data-entity="cmd_work" data-source-line="40" data-uid="ent0008" id="entity_cmd_work"><a href="../generated/svg/CMD-work.all_layers.lod1.svg" target="_top" title="../generated/svg/CMD-work.all_layers.lod1.svg" xlink:actuate="onRequest" xlink:href="../generated/svg/CMD-work.all_layers.lod1.svg" xlink:show="new" xlink:title="../generated/svg/CMD-work.all_layers.lod1.svg" xlink:type="simple"><rect fill="#FFFFFF" height="62.1973" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="101.4688" x="1263.46" y="158.2679"/><rect fill="#FFFFFF" height="10" style="stroke:#000000;stroke-width:1;" width="15" x="1344.9288" y="163.2679"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1;" width="4" x="1342.9288" y="165.2679"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1;" width="4" x="1342.9288" y="169.2679"/><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacing" textLength="29.5586" x="1278.46" y="191.3997">work</text><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacing" textLength="61.4688" x="1278.46" y="207.4983">command</text></a></g><!--entity NOTE_ANCHOR--><g class="entity" data-entity="ACTIVITY_FLOW" data-source-line="17" data-uid="ent0006" id="entity_ACTIVITY_FLOW"><path d="M823.86,57.2979 L823.86,321.4263 L1228.525,321.4263 L1228.525,67.2979 L1218.525,57.2979 L823.86,57.2979" fill="#FFFFCC" style="stroke:#CCCCCC;stroke-width:1;"/><path d="M1218.525,57.2979 L1218.525,67.2979 L1228.525,67.2979 L1218.525,57.2979" fill="#FFFFCC" style="stroke:#CCCCCC;stroke-width:1;"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacing" textLength="200.3066" x="829.86" y="74.4917">(*) --&gt; "User initiates work session"</text><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacing" textLength="172.6753" x="829.86" y="89.4404">:Check if inside Git repository;</text><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacing" textLength="24.5718" x="829.86" y="104.3892">stop</text><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacing" textLength="339.5933" x="829.86" y="119.3379">:Read HEAD commit hash and branch name from Git repo;</text><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacing" textLength="338.9077" x="829.86" y="134.2866">:Store (hash, branch) as identity snapshot in SessionStore;</text><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacing" textLength="382.9287" x="829.86" y="149.2354">:Update Docs Truth Store (./docs/maestro) with work session data;</text><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacing" textLength="128.5972" x="829.86" y="164.1841">:Work session started;</text><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacing" textLength="314.3105" x="829.86" y="179.1328">:Operator switches branch (git checkout other-branch);</text><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacing" textLength="341.7007" x="829.86" y="194.0815">:User resumes work session (maestro work --resume &lt;id&gt;);</text><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacing" textLength="267.3506" x="829.86" y="209.0303">:Retrieve identity snapshot from SessionStore;</text><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacing" textLength="383.665" x="829.86" y="223.979">:Read current HEAD commit hash and branch name from Git repo;</text><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacing" textLength="165.4453" x="829.86" y="238.9277">:Check for branch mismatch;</text><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacing" textLength="24.5718" x="829.86" y="253.8765">stop</text><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacing" textLength="138.0107" x="829.86" y="268.8252">:Continue work session;</text><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacing" textLength="261.7202" x="829.86" y="283.7739">"Work session completed successfully" --&gt; (*)</text><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacing" textLength="306.5474" x="829.86" y="298.7227">"Work session ended due to branch mismatch" --&gt; (*)</text><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="829.86" y="313.6714">&#160;</text></g><!--SRC=[dLHHRzis47xthxYv3tECIeBNOWzUKS1ruZL06mD9kc1e2u6XJX8HYXIEb0rZ6B0ViL-uNx8ZfRXsaXRTz9AOzztnk- -Etm- -nWQXrKAPaRjJfXKa6hWLyguYsvbYQRKbUBQAtm6Ym59qsg-iyHU2Aon82NqGNn3PxP3y8du7mGlhyOsb0cb0BEFt4F4K2KQDlF8QuMQLp5v20cz865c34oNw7LITe8A4qWx- -Ujlk8t1v3PK0UU5n-TWx70CRgkyh9MfeEWe_DbQkeF9k_NfR0ut_7-fxVPaDEeSIk4GnY7BqXY4WulrzLc-k5Y-NL-EQbNWqO5X-a2ggZtOyYW2C9rUsOuapgTJ-FYniD9bs-4gbsr-oXHbspABtQNAU3G-tOb6mtSZFtyU8NSRE8nw9antiRm-_-ty-lTyzMvzmomcqnD8ajSm_k2GG1db5OlZUWKSEgUi6JDklgnHte4g6UD2cxyg3uIjTSfRslt24ETj6v2NA0fuUxOu1McRXc6rS3K8fZB8RSAYb6IRVP6GFh_YGWYJW7u-G4y2PRxDyAXtu8neNMqzKu2hdbhCYTaVseA9moch0zVK-Hg6UcaM5Mi4Ea_s17ZMzL5xm8aYrhWvFEKj8Oz53AnR9C7bXarXVOPM9XLt88CqjkCPyokYPA3Uimgg4hgkUQ0fJ0P2_McIz21ufOhNVUebUbAumIVwZzezKY3gBZiYXlyV_Vi9bzpbW6kKQmItUpZS9JzqPJeyQYO0naVYySsjHfOFN2Sb7vQTrhjnN3LUkKTuNbJ65bpNsuVN7sRzs8kTi-nv80uSuTNU_ywH_ORcmJT0xDlxIYAnOF7WNk4vdBk7QJsP_9vC7ik4x9eD9W-ox6FpUm-wFs1tz2XPXMzNaeEcUT1qNsG_zeX6npM-lEUMFL5Kx4HB7d4OxJc_-uftD3nNU7Rsy-h5QWL_S4wOX3LX9SQX_2SZ-uneNh8fugLiG6cQLMZ2ccEHkKsLBT-V9Y6M2grpBNP8BjMscAKSP6lvS_0KZUMJvdQs2Gr4Umk_-ORDB7CIZI1byzdBV92Zz-lyYr-dJG5hzanbX8RDRE_HZtoTdpM_6EDZqypelztITkobttUF4gniSsYd_m80]--></g></svg>