@startuml
!theme plain
skinparam backgroundColor #FFFFFF
skinparam defaultFontName Arial
skinparam ArrowColor #333333
skinparam NoteBorderColor #CCCCCC
skinparam NoteBackgroundColor #FFFFCC

title WF-13 - Combined Layers (LOD0)

usecase "anchor" as NOTE_ANCHOR
hide NOTE_ANCHOR
note right of NOTE_ANCHOR
  **Source:** [[docs/workflows/v2/ir/wf/WF-13.intent.yaml docs/workflows/v2/ir/wf/WF-13.intent.yaml]]
end note

note as N1
  **Combined view (LOD0)**
  
  This diagram combines:
  * Intent layer (workflow logic)
  * Command integration
end note

!theme plain
skinparam backgroundColor #FFFFFF
skinparam defaultFontName Arial
skinparam ArrowColor #333333
skinparam NoteBorderColor #CCCCCC
skinparam NoteBackgroundColor #FFFFCC

title WF-13 - Read-only â†’ Adopt bridge (home hub to repo truth) (LOD0: Spine)

note right of NOTE_ANCHOR
  **Source:** [[docs/workflows/v2/ir/wf/WF-13.intent.yaml docs/workflows/v2/ir/wf/WF-13.intent.yaml]]
end note

note as ACTIVITY_FLOW
  (*) --> "User runs Maestro command in non-adopted repo"
  if "Read-only guard" then
    -->[yes] ...
    -->[no] ...
  endif
  if "Adopt this repository?" then
    -->[yes] ...
    -->[no] ...
  endif
  if "Decide import strategy" then
    -->[yes] ...
    -->[no] ...
  endif
  if "RepoConf gate" then
    -->[yes] ...
    -->[no] ...
  endif
  
end note
package "Data Stores" #F0F0F0 {
  database "home_hub\n$HOME/.maestro/repo/" as home_hub
  database "repo_truth\n./docs/maestro/" as repo_truth
}
'--> (*)
'--> (*)

package "Uses Commands" #E6F3FF {
  rectangle "init" as uses_init [[../generated/svg/CMD-init.all_layers.lod0.svg]]
  rectangle "make" as uses_make [[../generated/svg/CMD-make.all_layers.lod0.svg]]
  rectangle "repo" as uses_repo [[../generated/svg/CMD-repo.all_layers.lod0.svg]]
}

note left of NOTE_ANCHOR
  **Evidence:**
  * [[v1/scenario_13_readonly_to_adopt_bridge.md Original v1 readonly to adopt bridge workflow]]
  * [[v1/scenario_13_readonly_to_adopt_bridge.puml PlantUML diagram for readonly to adopt bridge]]
end note


@enduml
