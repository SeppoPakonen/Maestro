@startuml
!theme plain
skinparam backgroundColor #FFFFFF
skinparam defaultFontName Arial
skinparam ArrowColor #333333
skinparam NoteBorderColor #CCCCCC
skinparam NoteBackgroundColor #FFFFCC

title WF-15 - Work â†” wsession Cookie Protocol (File-based Polling, Multi-process Safe) (LOD0: Spine)

usecase "anchor" as NOTE_ANCHOR
hide NOTE_ANCHOR
note right of NOTE_ANCHOR
  **Source:** [[docs/workflows/v2/ir/wf/WF-15.intent.yaml docs/workflows/v2/ir/wf/WF-15.intent.yaml]]
end note

note as ACTIVITY_FLOW
  (*) --> "User initiates maestro work command"
  if "Validate breadcrumb message" then
    -->[yes] ...
    -->[no] ...
  endif
  
end note
package "Data Stores" #F0F0F0 {
  database "session_store\ndocs/sessions/<session_id>/session.json" as session_store
  database "breadcrumb_store\ndocs/sessions/<session_id>/breadcrumbs/" as breadcrumb_store
}
'--> (*)
'--> (*)

package "Uses Commands" #E6F3FF {
  rectangle "work" as uses_work [[../generated/svg/CMD-work.all_layers.lod0.svg]]
  rectangle "wsession" as uses_wsession [[../generated/svg/CMD-wsession.all_layers.lod0.svg]]
}

note left of NOTE_ANCHOR
  **Evidence:**
  * [[v1/scenario_15_work_wsession_cookie_protocol.md Original v1 workflow documentation]]
  * [[v1/scenario_15_work_wsession_cookie_protocol.puml PlantUML diagram for the workflow]]
end note

@enduml
