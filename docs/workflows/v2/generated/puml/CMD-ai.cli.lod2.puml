@startuml
!theme plain
skinparam backgroundColor #FFFFFF
skinparam defaultFontName Arial
skinparam ArrowColor #333333
skinparam NoteBorderColor #CCCCCC
skinparam NoteBackgroundColor #FFFFCC

title CMD-ai - ai command surface (LOD2: CLI Detail)

usecase "anchor" as NOTE_ANCHOR
hide NOTE_ANCHOR
note right of NOTE_ANCHOR
  **Source:** [[docs/workflows/v2/ir/cmd/CMD-ai.cli.yaml docs/workflows/v2/ir/cmd/CMD-ai.cli.yaml]]
end note

note as N1
  **LOD2: Argument parsing detail**
  
  See code layer for implementation details.
end note
component "Maestro CLI Invocation" as cli_invocation
component "Parse CLI arguments" as parse_args
component "Determine command is 'ai'" as determine_ai_command
component "Parse AI subcommands" as parse_ai_subcommands
component "Load AI configuration" as load_ai_config
component "Route to appropriate AI subcommand handler" as route_to_subcommand_handler
component "Validate AI configuration" as validate_ai_config
component "Invoke AI engine" as invoke_ai_engine
component "Output AI responses to stdout" as output_responses
component "Show AI help" as show_ai_help

note left of NOTE_ANCHOR
  **Evidence:**
  * [[v1/command_surface/cmd_ai.md cmd_ai.md]]
  * [[v1/command_surface/cmd_ai.puml cmd_ai.puml]]
end note

@enduml
