<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="DESCRIPTION" height="1006px" preserveAspectRatio="none" style="width:847px;height:1006px;background:#FFFFFF;" version="1.1" viewBox="0 0 847 1006" width="847px" zoomAndPan="magnify"><title>CMD-ai - ai command surface (LOD1: CLI Flow)</title><defs/><g><g class="title" data-source-line="8"><text fill="#000000" font-family="Arial" font-size="22" font-weight="bold" lengthAdjust="spacing" textLength="492.6045" x="172.91" y="35.6357">CMD-ai - ai command surface (LOD1: CLI Flow)</text></g><!--entity NOTE_ANCHOR--><!--entity cli_invocation--><g class="entity" data-entity="cli_invocation" data-source-line="16" data-uid="ent0006" id="entity_cli_invocation"><rect fill="#FFFFFF" height="36.0986" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="163.958" x="601.37" y="66.6679"/><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacing" textLength="143.958" x="611.37" y="89.7997">Maestro CLI Invocation</text></g><!--entity parse_args--><g class="entity" data-entity="parse_args" data-source-line="17" data-uid="ent0007" id="entity_parse_args"><rect fill="#FFFFFF" height="36.0986" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="152.2822" x="607.21" y="172.1479"/><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacing" textLength="132.2822" x="617.21" y="195.2797">Parse CLI arguments</text></g><!--entity determine_ai_command--><g class="entity" data-entity="determine_ai_command" data-source-line="18" data-uid="ent0008" id="entity_determine_ai_command"><rect fill="#FFFFFF" height="36.0986" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="184.0693" x="591.31" y="268.2479"/><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacing" textLength="164.0693" x="601.31" y="291.3797">Determine command is 'ai'</text></g><!--entity parse_ai_subcommands--><g class="entity" data-entity="parse_ai_subcommands" data-source-line="19" data-uid="ent0009" id="entity_parse_ai_subcommands"><ellipse cx="683.349" cy="384.2497" fill="#FFFFFF" rx="87.509" ry="19.9018" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacing" textLength="148.6201" x="609.0389" y="388.799">Parse AI subcommands</text></g><!--entity load_ai_config--><g class="entity" data-entity="load_ai_config" data-source-line="20" data-uid="ent0010" id="entity_load_ai_config"><rect fill="#FFFFFF" height="36.0986" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="152.3164" x="543.19" y="464.1479"/><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacing" textLength="132.3164" x="553.19" y="487.2797">Load AI configuration</text></g><!--entity route_to_subcommand_handler--><g class="entity" data-entity="route_to_subcommand_handler" data-source-line="21" data-uid="ent0011" id="entity_route_to_subcommand_handler"><rect fill="#FFFFFF" height="36.0986" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="303.2813" x="429.71" y="560.2479"/><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacing" textLength="283.2813" x="439.71" y="583.3797">Route to appropriate AI subcommand handler</text></g><!--entity validate_ai_config--><g class="entity" data-entity="validate_ai_config" data-source-line="22" data-uid="ent0012" id="entity_validate_ai_config"><rect fill="#FFFFFF" height="46.0986" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="191.7646" x="485.47" y="656.3479"/><rect fill="#FFFFFF" height="10" style="stroke:#000000;stroke-width:1;" width="15" x="657.2346" y="661.3479"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1;" width="4" x="655.2346" y="663.3479"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1;" width="4" x="655.2346" y="667.3479"/><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacing" textLength="151.7646" x="500.47" y="689.4797">Validate AI configuration</text></g><!--entity invoke_ai_engine--><g class="entity" data-entity="invoke_ai_engine" data-source-line="23" data-uid="ent0013" id="entity_invoke_ai_engine"><rect fill="#FFFFFF" height="46.0986" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="144.2959" x="509.2" y="762.4379"/><rect fill="#FFFFFF" height="10" style="stroke:#000000;stroke-width:1;" width="15" x="633.4959" y="767.4379"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1;" width="4" x="631.4959" y="769.4379"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1;" width="4" x="631.4959" y="773.4379"/><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacing" textLength="104.2959" x="524.2" y="795.5697">Invoke AI engine</text></g><!--entity output_responses--><g class="entity" data-entity="output_responses" data-source-line="24" data-uid="ent0014" id="entity_output_responses"><rect fill="#FFFFFF" height="36.0986" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="205.2197" x="478.74" y="868.5379"/><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacing" textLength="185.2197" x="488.74" y="891.6697">Output AI responses to stdout</text></g><!--entity show_ai_help--><g class="entity" data-entity="show_ai_help" data-source-line="25" data-uid="ent0015" id="entity_show_ai_help"><rect fill="#FFFFFF" height="36.0986" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="102.4961" x="723.1" y="661.3479"/><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacing" textLength="82.4961" x="733.1" y="684.4797">Show AI help</text></g><!--entity exit_fail--><g class="entity" data-entity="exit_fail" data-source-line="26" data-uid="ent0016" id="entity_exit_fail"><rect fill="#FFFFFF" height="46.0986" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="134.1445" x="707.28" y="762.4379"/><rect fill="#FFFFFF" height="10" style="stroke:#000000;stroke-width:1;" width="15" x="821.4245" y="767.4379"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1;" width="4" x="819.4245" y="769.4379"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1;" width="4" x="819.4245" y="773.4379"/><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacing" textLength="94.1445" x="722.28" y="795.5697">Exit with failure</text></g><!--entity exit_ok--><g class="entity" data-entity="exit_ok" data-source-line="27" data-uid="ent0017" id="entity_exit_ok"><rect fill="#FFFFFF" height="36.0986" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="122.6963" x="520" y="964.6379"/><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacing" textLength="102.6963" x="530" y="987.7697">Exit successfully</text></g><!--link cli_invocation to parse_args--><g class="link" data-entity-1="cli_invocation" data-entity-2="parse_args" data-source-line="28" data-uid="lnk18" id="link_cli_invocation_parse_args"><path d="M683.35,102.8079 C683.35,121.8679 683.35,146.5279 683.35,165.7379" fill="none" id="cli_invocation-to-parse_args" style="stroke:#333333;stroke-width:1;"/><polygon fill="#333333" points="683.35,171.7379,687.35,162.7379,683.35,166.7379,679.35,162.7379,683.35,171.7379" style="stroke:#333333;stroke-width:1;"/></g><!--link parse_args to determine_ai_command--><g class="link" data-entity-1="parse_args" data-entity-2="determine_ai_command" data-source-line="29" data-uid="lnk19" id="link_parse_args_determine_ai_command"><path d="M683.35,208.4579 C683.35,225.3279 683.35,244.8779 683.35,261.8279" fill="none" id="parse_args-to-determine_ai_command" style="stroke:#333333;stroke-width:1;"/><polygon fill="#333333" points="683.35,267.8279,687.35,258.8279,683.35,262.8279,679.35,258.8279,683.35,267.8279" style="stroke:#333333;stroke-width:1;"/></g><!--link determine_ai_command to parse_ai_subcommands--><g class="link" data-entity-1="determine_ai_command" data-entity-2="parse_ai_subcommands" data-source-line="30" data-uid="lnk20" id="link_determine_ai_command_parse_ai_subcommands"><path d="M683.35,304.4479 C683.35,321.1579 683.35,340.5179 683.35,357.9279" fill="none" id="determine_ai_command-to-parse_ai_subcommands" style="stroke:#333333;stroke-width:1;"/><polygon fill="#333333" points="683.35,363.9279,687.35,354.9279,683.35,358.9279,679.35,354.9279,683.35,363.9279" style="stroke:#333333;stroke-width:1;"/></g><!--link parse_ai_subcommands to load_ai_config--><g class="link" data-entity-1="parse_ai_subcommands" data-entity-2="load_ai_config" data-source-line="31" data-uid="lnk21" id="link_parse_ai_subcommands_load_ai_config"><path d="M670.7,404.1979 C659.12,421.5679 645.4396,442.0765 634.2196,458.8965" fill="none" id="parse_ai_subcommands-to-load_ai_config" style="stroke:#333333;stroke-width:1;"/><polygon fill="#333333" points="630.89,463.8879,639.2119,458.6205,633.6646,459.7284,632.5568,454.1811,630.89,463.8879" style="stroke:#333333;stroke-width:1;"/></g><!--link load_ai_config to route_to_subcommand_handler--><g class="link" data-entity-1="load_ai_config" data-entity-2="route_to_subcommand_handler" data-source-line="32" data-uid="lnk22" id="link_load_ai_config_route_to_subcommand_handler"><path d="M612.38,500.4579 C605.56,517.3279 597.4853,537.3138 590.6453,554.2638" fill="none" id="load_ai_config-to-route_to_subcommand_handler" style="stroke:#333333;stroke-width:1;"/><polygon fill="#333333" points="588.4,559.8279,595.4773,552.9787,590.2711,555.1911,588.0586,549.9849,588.4,559.8279" style="stroke:#333333;stroke-width:1;"/></g><!--link route_to_subcommand_handler to validate_ai_config--><g class="link" data-entity-1="route_to_subcommand_handler" data-entity-2="validate_ai_config" data-source-line="33" data-uid="lnk23" id="link_route_to_subcommand_handler_validate_ai_config"><path d="M581.35,596.5579 C581.35,613.0779 581.35,632.0879 581.35,650.1179" fill="none" id="route_to_subcommand_handler-to-validate_ai_config" style="stroke:#333333;stroke-width:1;"/><polygon fill="#333333" points="581.35,656.1179,585.35,647.1179,581.35,651.1179,577.35,647.1179,581.35,656.1179" style="stroke:#333333;stroke-width:1;"/></g><!--link validate_ai_config to invoke_ai_engine--><g class="link" data-entity-1="validate_ai_config" data-entity-2="invoke_ai_engine" data-source-line="34" data-uid="lnk24" id="link_validate_ai_config_invoke_ai_engine"><path d="M581.35,702.7279 C581.35,720.2879 581.35,738.6379 581.35,756.1979" fill="none" id="validate_ai_config-to-invoke_ai_engine" style="stroke:#333333;stroke-width:1;"/><polygon fill="#333333" points="581.35,762.1979,585.35,753.1979,581.35,757.1979,577.35,753.1979,581.35,762.1979" style="stroke:#333333;stroke-width:1;"/></g><!--link invoke_ai_engine to output_responses--><g class="link" data-entity-1="invoke_ai_engine" data-entity-2="output_responses" data-source-line="35" data-uid="lnk25" id="link_invoke_ai_engine_output_responses"><path d="M581.35,808.9779 C581.35,826.9079 581.35,845.6579 581.35,862.1279" fill="none" id="invoke_ai_engine-to-output_responses" style="stroke:#333333;stroke-width:1;"/><polygon fill="#333333" points="581.35,868.1279,585.35,859.1279,581.35,863.1279,577.35,859.1279,581.35,868.1279" style="stroke:#333333;stroke-width:1;"/></g><!--link parse_ai_subcommands to show_ai_help--><g class="link" data-entity-1="parse_ai_subcommands" data-entity-2="show_ai_help" data-source-line="36" data-uid="lnk26" id="link_parse_ai_subcommands_show_ai_help"><path d="M691.85,404.3079 C705.74,436.0879 733.45,502.1379 750.35,560.2479 C760.58,595.4179 767.0995,631.782 770.7895,655.032" fill="none" id="parse_ai_subcommands-to-show_ai_help" style="stroke:#333333;stroke-width:1;"/><polygon fill="#333333" points="771.73,660.9579,774.2698,651.4421,770.9463,656.0197,766.3687,652.6961,771.73,660.9579" style="stroke:#333333;stroke-width:1;"/></g><!--link show_ai_help to exit_fail--><g class="link" data-entity-1="show_ai_help" data-entity-2="exit_fail" data-source-line="37" data-uid="lnk27" id="link_show_ai_help_exit_fail"><path d="M774.35,697.5779 C774.35,715.2579 774.35,736.8479 774.35,756.1879" fill="none" id="show_ai_help-to-exit_fail" style="stroke:#333333;stroke-width:1;"/><polygon fill="#333333" points="774.35,762.1879,778.35,753.1879,774.35,757.1879,770.35,753.1879,774.35,762.1879" style="stroke:#333333;stroke-width:1;"/></g><!--link route_to_subcommand_handler to show_ai_help--><g class="link" data-entity-1="route_to_subcommand_handler" data-entity-2="show_ai_help" data-source-line="38" data-uid="lnk28" id="link_route_to_subcommand_handler_show_ai_help"><path d="M615.41,596.7779 C650.58,614.8379 699.8023,640.1176 734.9623,658.1676" fill="none" id="route_to_subcommand_handler-to-show_ai_help" style="stroke:#333333;stroke-width:1;"/><polygon fill="#333333" points="740.3,660.9079,734.1202,653.2391,735.8519,658.6243,730.4666,660.356,740.3,660.9079" style="stroke:#333333;stroke-width:1;"/></g><!--link output_responses to exit_ok--><g class="link" data-entity-1="output_responses" data-entity-2="exit_ok" data-source-line="39" data-uid="lnk29" id="link_output_responses_exit_ok"><path d="M581.35,904.8479 C581.35,921.7179 581.35,941.2779 581.35,958.2179" fill="none" id="output_responses-to-exit_ok" style="stroke:#333333;stroke-width:1;"/><polygon fill="#333333" points="581.35,964.2179,585.35,955.2179,581.35,959.2179,577.35,955.2179,581.35,964.2179" style="stroke:#333333;stroke-width:1;"/></g><!--SRC=[ZLJTRzem47_FNt5Z3zsG07LxwyCa1gs6rCBKJdkfgiXr76BX-29_mFhVx-oau01hvuSe_dtuxdpMVN2Lg0KqYacTsOtK3JEiXcV6Dsk3NXSpL6ZWuqrSYQ8G9VFAtQ1sIqOdJ8raAk6dnk2kCt-DAo6NwCHtD8KmdM8Mrx7YN1AaofnqIi3iRZvY4aP07uvrpNG1rfkISG6VRbVpookOtIxWHk7kSvPvApYp0WPCymhD09Y5vUhNTJvTpdwixhDA5g87QCe0Z5nN3h3iCG33uGDwmyNLS0YFZmLoEzcXsPGKoawsNoRIJ7XTJDeCnrp9yGkh5VolyEaf4rHCo23BZE2EwJKLFBXZmZg3iQo5tY9dJgAEfP0rbtieDVraXieE5cRMlXRQsUXe0fuJPbFrN3XXQgd5_agbXGicBwAdU6Lp9lDESBZPDj9qGLruxiXUA9adH1hq5baHV1nrATVU7CfInBIn0fDwxj5JVnm2Qng33Rq-TnGRAleeqRRQ17dkC4aXx_YCzWrgkXWO_6PA5jr9fzbiEpR9AF66ZcoYK-WrtL6qo0W6Gmkc9QoyQxmB1YCidMA53GLPLr2oqOrHaU_frFrGuIvuAw6QABO4X401IFEw_YCTxAIhe6HIUTCc9WZD0v2U6QNMSowiBRrIBmSfRhB-6uFHw5lwY0w_aJdxLCw1wJdz5t8EZEgZLz7VHiLRxNw3YzupNJw5elAakST0L9qqyPzrzJgORYARTEoT2dhd78S_d4KjRQUS4kNP8NUzfQ6euvWBUnfrsyl9Qy1kr8RvHR76TG7xFvfVxyaRJ_Cm-Kz7tby0]--></g></svg>