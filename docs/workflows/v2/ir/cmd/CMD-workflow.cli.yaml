id: "CMD-workflow"
layer: "cli"
title: "workflow command surface"
status: "partial"
confidence: "medium"
storage_backend: "json"

commands:
  - "maestro workflow"
  - "maestro workflow init"
  - "maestro workflow list"
  - "maestro workflow show"
  - "maestro workflow node add"
  - "maestro workflow node rm"
  - "maestro workflow node edit"
  - "maestro workflow edge add"
  - "maestro workflow edge rm"
  - "maestro workflow edge edit"
  - "maestro workflow validate"
  - "maestro workflow export --format puml"
  - "maestro workflow render --format svg"
  - "maestro workflow discuss"

stores_write:
  - "REPO_TRUTH_DOCS_MAESTRO"

nodes:
  - id: "workflow_cmd"
    type: "command"
    label: "maestro workflow"
  - id: "subcmd-init"
    type: "subcommand"
    label: "init"
  - id: "subcmd-list"
    type: "subcommand"
    label: "list"
  - id: "subcmd-show"
    type: "subcommand"
    label: "show"
  - id: "subcmd-node-add"
    type: "subcommand"
    label: "node add"
  - id: "subcmd-node-rm"
    type: "subcommand"
    label: "node rm"
  - id: "subcmd-node-edit"
    type: "subcommand"
    label: "node edit"
  - id: "subcmd-edge-add"
    type: "subcommand"
    label: "edge add"
  - id: "subcmd-edge-rm"
    type: "subcommand"
    label: "edge rm"
  - id: "subcmd-edge-edit"
    type: "subcommand"
    label: "edge edit"
  - id: "subcmd-validate"
    type: "subcommand"
    label: "validate"
  - id: "subcmd-export"
    type: "subcommand"
    label: "export --format puml"
  - id: "subcmd-render"
    type: "subcommand"
    label: "render --format svg"
  - id: "subcmd-discuss"
    type: "subcommand"
    label: "discuss"

edges:
  - from: "workflow_cmd"
    to: "subcmd-init"
  - from: "workflow_cmd"
    to: "subcmd-list"
  - from: "workflow_cmd"
    to: "subcmd-show"
  - from: "workflow_cmd"
    to: "subcmd-node-add"
  - from: "workflow_cmd"
    to: "subcmd-node-rm"
  - from: "workflow_cmd"
    to: "subcmd-node-edit"
  - from: "workflow_cmd"
    to: "subcmd-edge-add"
  - from: "workflow_cmd"
    to: "subcmd-edge-rm"
  - from: "workflow_cmd"
    to: "subcmd-edge-edit"
  - from: "workflow_cmd"
    to: "subcmd-validate"
  - from: "workflow_cmd"
    to: "subcmd-export"
  - from: "workflow_cmd"
    to: "subcmd-render"
  - from: "workflow_cmd"
    to: "subcmd-discuss"

exports:
  - "writes workflow graphs under ./docs/maestro/workflows/*.json"
  - "optional PlantUML/SVG export artifacts"

evidence:
  - "docs/workflows/v2/commands/cmd_workflow.md"
  - "docs/workflows/v2/commands/cmd_workflow.puml"

notes:
  - "Spec-only command surface; implementation may differ"
