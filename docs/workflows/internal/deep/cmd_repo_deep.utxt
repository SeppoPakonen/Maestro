                                                                                                                                                                                                                                                                                         ┌──────┐                                                                                                                                                ┌─────────────────┐                                                                                                                                                ┌─────────────────────────┐   ┌──────────────────┐  ┌────────────────────┐   ┌────────────┐
                                                                                                                                                                                                                                                                                         │main()│                                                                                                                                                │add_repo_parser()│                                                                                                                                                │handle_repo_refresh_all()│   │handle_repo_hier()│  │get_package_config()│   │match_when()│
                                                                                                                                                                                                                                                                                         ├──────┤                                                                                                                                                ├─────────────────┤                                                                                                                                                ├─────────────────────────┤   ├──────────────────┤  ├────────────────────┤   ├────────────┤
                                                                                                                                                                                                                                                                                         └──────┘                                                                                                                                                └─────────────────┘                                                                                                                                                └─────────────────────────┘   └──────────────────┘  └────────────────────┘   └────────────┘
                                                                                                                                                                                                                                                                                             |                                                                                                                                                                                                                                                                                                                                   |                                                                             
                                                                                                                                                                                                                                                                                             |                                                                                                                                                                                                                                                                                                                                   |                                                                             
                      ┌──────────────┐                                                                                                                                                                                                                                           ┌─────────────────────┐                                                                                                                                                                                                                                                                                                           ┌──────────────────────────┐                                                                
                      │User's $EDITOR│                                                                                                                                                                                                                                           │handle_repo_command()│                                                                                                                                                                                                                                                                                                           │update_global_repo_index()│                                                                
                      ├──────────────┤                                                                                                                                                                                                                                           ├─────────────────────┤                                                                                                                                                                                                                                                                                                           ├──────────────────────────┤                                                                
                      └──────────────┘                                                                                                                                                                                                                                           └─────────────────────┘                                                                                                                                                                                                                                                                                                           └──────────────────────────┘                                                                
                                                                                                                                                                                                                                                                                             |                                                                                                                                                                                                                                                                                                                                   |                                                                             
┌────────────────────────┐        ┌───────────────────────┐   ┌──────────────────────┐   ┌──────────────────────┐   ┌──────────────────┐   ┌────────────────┐   ┌───────────────────────────┐   ┌──────────────────────┐  ┌──────────────────────┐   ┌──────────────────────┐   ┌───────────────────────┐   ┌────────────────────────┐   ┌────────────────────────┐   ┌─────────────────┐   ┌──────────────────────┐  ┌────────────────────────────────┐   ┌──────────────────────────────┐   ┌──────────────────────────┐   ┌────────────────┐   ┌──────────────────────┐  ┌────────────────┐                                   |                                                                             
│handle_repo_rules_edit()│        │handle_repo_hier_edit()│   │write_repo_artifacts()│   │build_repo_hierarchy()│   │scan_upp_repo_v2()│   │load_hierarchy()│   │merge_hierarchy_overrides()│   │print_hierarchy_tree()│  │handle_repo_pkg_list()│   │handle_repo_pkg_info()│   │handle_repo_pkg_files()│   │handle_repo_pkg_groups()│   │handle_repo_pkg_search()│   │load_repo_index()│   │handle_repo_pkg_tree()│  │handle_repo_conventions_detect()│   │handle_repo_conventions_show()│   │handle_repo_rules_inject()│   │find_repo_root()│   │handle_repo_pkg_conf()│  │save_hierarchy()│                                   |                                                                             
├────────────────────────┤        ├───────────────────────┤   ├──────────────────────┤   ├──────────────────────┤   ├──────────────────┤   ├────────────────┤   ├───────────────────────────┤   ├──────────────────────┤  ├──────────────────────┤   ├──────────────────────┤   ├───────────────────────┤   ├────────────────────────┤   ├────────────────────────┤   ├─────────────────┤   ├──────────────────────┤  ├────────────────────────────────┤   ├──────────────────────────────┤   ├──────────────────────────┤   ├────────────────┤   ├──────────────────────┤  ├────────────────┤                                   |                                                                             
└────────────────────────┘        └───────────────────────┘   └──────────────────────┘   └──────────────────────┘   └──────────────────┘   └────────────────┘   └───────────────────────────┘   └──────────────────────┘  └──────────────────────┘   └──────────────────────┘   └───────────────────────┘   └────────────────────────┘   └────────────────────────┘   └─────────────────┘   └──────────────────────┘  └────────────────────────────────┘   └──────────────────────────────┘   └──────────────────────────┘   └────────────────┘   └──────────────────────┘  └────────────────┘                                   |                                                                             
                                                                                                                                                                                                                                                                                                                                                                               |                        |                                                                                                                                                                                                                        |                                                                             
                                                                                                                                                                                                                                                                                                                                                                               |                                                                                                                                                                                                                                                                                                                               
                 ┌────────────────────────┐        ┌─────────────────┐         ┌───────────┐   ┌─────────┐   ┌───────────┐   ┌───────────────────┐                                                                                                                                                                                                                             |        ┌─────────────────────────────┐                                                                                                                 ┌──────────────────────────────────┐         ┌──────────────────────────┐   ┌─────────────────────────┐                                                                
                 │handle_repo_rules_show()│        │subprocess module│         │File System│   │FileGroup│   │PackageInfo│   │RepoScanResultClass│                                                                                                                                                                                                                             |        │UppConditionsModule.MatchWhen│                                                                                                                 │BuildConfigModule.GetPackageConfig│         │load_hierarchy_overrides()│   │$HOME/.maestro/repos.json│                                                                
                 ├────────────────────────┤        ├─────────────────┤         ├───────────┤   ├─────────┤   ├───────────┤   ├───────────────────┤                                                                                                                                                                                                                             |        ├─────────────────────────────┤                                                                                                                 ├──────────────────────────────────┤         ├──────────────────────────┤   ├─────────────────────────┤                                                                
                 └────────────────────────┘        └─────────────────┘         └───────────┘   └─────────┘   └───────────┘   └───────────────────┘                                                                                                                                                                                                                             |        └─────────────────────────────┘                                                                                                                 └──────────────────────────────────┘         └──────────────────────────┘   └─────────────────────────┘                                                                
                                                                                                                                                                                                                                                                                                                                                                               |                                                                                                                                                                                                                                                                                                                               
           ┌─────────────────┐                                                                                                                                                                                                                                                                                                                                         ┌──────────────┐                                                                                                                                                                                                                                                                                                                        
           │docs/RepoRules.md│                                                                                                                                                                                                                                                                                                                                         │.maestro/repo/│                                                                                                                                                                                                                                                                                                                        
           ├─────────────────┤                                                                                                                                                                                                                                                                                                                                         ├──────────────┤                                                                                                                                                                                                                                                                                                                        
           └─────────────────┘                                                                                                                                                                                                                                                                                                                                         └──────────────┘                                                                                                                                                                                                                                                                                                                        
