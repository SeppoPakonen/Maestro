@startuml PROJECT_MAP

title Maestro Project Map

package "Human Interaction" {
  actor "Human User" as User
  interface "CLI" as CLI
  interface "TUI (Planned)" as TUI

  User -right-> CLI : "maestro ..."
  User -.-> TUI : (Future)
}

package "Maestro Core" {
  component "Maestro Orchestrator" as Orchestrator
  CLI --> Orchestrator

  package "Project State (docs/)" {
    artifact "todo.md" as Todo
    artifact "done.md" as Done
    artifact "config.md" as Config
    artifact "phases/*.md" as Phases
    artifact "repo/state.md" as RepoState
  }

  Orchestrator -down-> Todo : Manages
  Orchestrator -down-> Done : Manages
  Orchestrator -down-> Config : Reads/Writes
  Orchestrator -down-> Phases : Reads/Writes

  package "AI Interaction" {
    component "Prompt Builder" as PromptBuilder
    component "Prompt Contract" as Contract
    component "AI Engine Manager" as AIManager

    Orchestrator -right-> PromptBuilder : Builds Prompts
    PromptBuilder -> Contract : Enforces
    PromptBuilder -> AIManager : Sends Prompts
  }
}

package "AI Services" {
  component "Planners (Claude, Codex)" as Planners
  component "Workers (Qwen, Gemini)" as Workers

  AIManager -right-> Planners : "Plan this"
  AIManager -right-> Workers : "Do this"

  Planners ..> AIManager : Proposes JSON
  Workers ..> AIManager : Returns results
}

package "Project Artifacts" {
    package "sessions/" as Sessions
    package "external/ai-agents" as ExternalAI
}

AIManager -> Sessions : Logs I/O
CLI -> ExternalAI : Invokes

User -> Orchestrator : Directs

@enduml